<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name=”viewport” content=”width=device-width,initial-scale=1″>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HTGR5QC75B"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-HTGR5QC75B');
    </script>
    <title>縦書き html/PDF/EPUB</title>
  </head>
  <body>

  <!--Hello, world!-->

  <h1>縦書き html/PDF/EPUB/mobi 置き場</h1>
    
    縦書き html、PDF、EPUB、mobi の置き場です。主に自分用です（組版好きなので）。
    
    <h2>名義について</h2>
    <ul>
     <li> 頭おかしい人の別名義です。</li>
     <li> かなり異端で不謹慎な話しか書いてないのと、そもそもグレーな活動なので、ただのエキストラ的な感じでやっています。名乗るほどの者ではありません。</li>
     <li> ただし、ヘタレすぎて自分から言い出せないだけで、別に秘密にしているわけではまったくないです。言及いただいてまったくかまいませんし、呼ばれれば答えます。まあ、ここをご覧になっている時点で、もうバレているのだと思いますが。</li>
     <li> 何かあれば <a href="https://www.pixiv.net/users/59321047">pixiv</a> DM、<a href="https://syosetu.org/user/418672/">ハーメルン</a>か <a href="https://twitter.com/alltale2037">Twitter</a> へご連絡ください。</li>
     <li> 名前には何の意味もなく、面倒なので決めてないだけです。ハーメルンは 1 文字だとダメなのでしょうがなく 2 文字にしました。いい名前を思いついたら変えるかも。</li>
    </ul>
    
    <h2>内容について</h2>
    <ul>
      <li> 公式とは一切関係ありません。</li>
      <li> この手の活動について非常に疎いため、もし非常識なことをしてしまっていたら申し訳ありません。</li>
      <li> 同じ内容が <a href="https://www.pixiv.net/users/59321047">pixiv</a> と<a href="https://syosetu.org/user/418672/">ハーメルン</a>にもあります。</li>
      <li> 内容説明やネタバレ等の注意書きは <a href="https://www.pixiv.net/users/59321047">pixiv</a> のキャプションや<a href="https://syosetu.org/user/418672/">ハーメルン</a>のあらすじ、前書き、後書きをご覧下さい。</li>
      <li> この手の活動に対する、ある種の実験として始めました。質や面白さよりも「とにかく書き上げる」ことを目標にしています（言い訳）。</li>
      <li> オリ設定、オリキャラ、オリ展開、内輪ネタ多めなので苦手な方はご注意ください。キャラもしばしば原形を留めていません。</li>
      <li> 書きたいものを書いてます。読者のことまで頭が回ってません。すいません。</li>
      <li> 俺得でしかないので完全壁打ち活動ですが、だからこそ逆に反応あると (たとえネガティブなものでも) めちゃくちゃうれしいです。感想は随時募集中。</li>
    </ul>
    
    <h2>一覧（随時更新）</h2>

    Kindle for iOS では、EPUB、mobi、PDF がまともに読めませんのでご注意下さい（ルビが使えない等）。
    <p>
    Vivliostyle Viewer ではフォントサイズや見開き／単ページの選択ができます。  
    </p>

    <h3> 『2027年7月2日20時57分24秒』 (2022/9/20) </h3>
    <a href="https://www.pixiv.net/novel/show.php?id=18384195">pixiv</a> / <a href="https://syosetu.org/novel/309135/">ハーメルン</a> /
    <a href="https://alltale2037.github.io/tales/html/2027wiz.html">html</a> / 
    <a href="https://alltale2037.github.io/tales/pdf/2027wiz.pdf">PDF</a> /
    <a href="https://alltale2037.github.io/tales/viewer/#src=https://alltale2037.github.io/tales/epub/src/2027wiz/">Vivliostyle Viewer</a> /
    <a href="https://alltale2037.github.io/tales/epub/2027wiz.epub">EPUB</a> /
    <a href="https://alltale2037.github.io/tales/mobi/2027wiz.mobi">mobi</a> 

    <h3>『アンサー』 (2022/10/10) </h3>
    <a href="https://www.pixiv.net/novel/show.php?id=18507101">pixiv</a> / <a href="https://syosetu.org/novel/309137/">ハーメルン</a> /
    <a href="https://alltale2037.github.io/tales/html/answer.html">html</a> / 
    <a href="https://alltale2037.github.io/tales/pdf/answer.pdf">PDF</a> /
    <a href="https://alltale2037.github.io/tales/viewer/#src=https://alltale2037.github.io/tales/epub/src/answer/">Vivliostyle Viewer</a> /
    <a href="https://alltale2037.github.io/tales/epub/answer.epub">EPUB</a> /
    <a href="https://alltale2037.github.io/tales/mobi/answer.mobi">mobi</a> 

    <h3>『一条さん』 (2023/1/2) </h3>
    <a href="https://www.pixiv.net/novel/show.php?id=19026741">pixiv</a> / <a href="https://syosetu.org/novel/309140/">ハーメルン</a> /
    <a href="https://alltale2037.github.io/tales/html/ichijo.html">html</a> / 
    <a href="https://alltale2037.github.io/tales/pdf/ichijo.pdf">PDF</a> /
    <a href="https://alltale2037.github.io/tales/viewer/#src=https://alltale2037.github.io/tales/epub/src/ichijo/">Vivliostyle Viewer</a> /
    <a href="https://alltale2037.github.io/tales/epub/ichijo.epub">EPUB</a> /
    <a href="https://alltale2037.github.io/tales/mobi/ichijo.mobi">mobi</a> 

    <h3>『ERROR』 (2023/1/23) </h3>
    <a href="https://www.pixiv.net/novel/show.php?id=19156928">pixiv</a> / <a href="https://syosetu.org/novel/309142/">ハーメルン</a> /
    <a href="https://alltale2037.github.io/tales/html/error.html">html</a> /
    <a href="https://alltale2037.github.io/tales/pdf/error.pdf">PDF</a> /
    <a href="https://alltale2037.github.io/tales/viewer/#src=https://alltale2037.github.io/tales/epub/src/error/">Vivliostyle Viewer</a> /
    <a href="https://alltale2037.github.io/tales/epub/error.epub">EPUB</a> /
    <a href="https://alltale2037.github.io/tales/mobi/error.mobi">mobi</a> 
    
    <h3> 『後ろ結び』 (2023/5/8) </h3>
    <a href="https://www.pixiv.net/novel/show.php?id=19842873">pixiv</a> / <a href="https://syosetu.org/novel/315794/">ハーメルン</a> /
    <a href="https://alltale2037.github.io/tales/html/muffler.html">html</a> /
    <a href="https://alltale2037.github.io/tales/pdf/muffler.pdf">PDF</a> /
    <a href="https://alltale2037.github.io/tales/viewer/#src=https://alltale2037.github.io/tales/epub/src/muffler/">Vivliostyle Viewer</a> /
    <a href="https://alltale2037.github.io/tales/epub/muffler.epub">EPUB</a> /
    <a href="https://alltale2037.github.io/tales/mobi/muffler.mobi">mobi</a> 
  
    <h3> 『クローゼットの鍵を開けてよ』 (2023/7/29) </h3>
    <a href="https://www.pixiv.net/novel/show.php?id=20350411">pixiv</a> / <a href="https://syosetu.org/novel/321964/">ハーメルン</a> /
    <a href="https://alltale2037.github.io/tales/html/miu.html">html</a> /
    <a href="https://alltale2037.github.io/tales/pdf/miu.pdf">PDF</a> /
    <a href="https://alltale2037.github.io/tales/viewer/#src=https://alltale2037.github.io/tales/epub/src/miu/">Vivliostyle Viewer</a> /
    <a href="https://alltale2037.github.io/tales/epub/miu.epub">EPUB</a> /
    <a href="https://alltale2037.github.io/tales/mobi/miu.mobi">mobi</a> 
  
    <h3> 『エキセントリシティ』 (2023/9/20) </h3>
    <a href="https://www.pixiv.net/novel/show.php?id=20695842">pixiv</a> / <a href="https://syosetu.org/novel/326198/1.html">ハーメルン</a> /
    <a href="https://alltale2037.github.io/tales/html/eccentricity.html">html</a> /
    <a href="https://alltale2037.github.io/tales/pdf/eccentricity.pdf">PDF</a> /
    <a href="https://alltale2037.github.io/tales/viewer/#src=https://alltale2037.github.io/tales/epub/src/eccentricity/">Vivliostyle Viewer</a> /
    <a href="https://alltale2037.github.io/tales/epub/eccentricity.epub">EPUB</a> /
    <a href="https://alltale2037.github.io/tales/mobi/eccentricity.mobi">mobi</a> 

    <h3> 『こたえのかわりに、曲をかける』 (2023/10/30) </h3>
    <a href="https://www.pixiv.net/novel/show.php?id=20933755">pixiv</a> / <a href="https://syosetu.org/novel/329213/1.html">ハーメルン</a> /
    <a href="https://alltale2037.github.io/tales/html/remix.html">html</a> /
    <a href="https://alltale2037.github.io/tales/pdf/remix.pdf">PDF</a> /
    <a href="https://alltale2037.github.io/tales/viewer/#src=https://alltale2037.github.io/tales/epub/src/remix/">Vivliostyle Viewer</a> /
    <a href="https://alltale2037.github.io/tales/epub/remix.epub">EPUB</a> /
    <a href="https://alltale2037.github.io/tales/mobi/remix.mobi">mobi</a> 
  
    <p></p>
    <hr>
    <p></p>

    <h2>フォーマットについて</h2>

    <h3>組版</h3>
    <ul>
     <li> 以下の環境で typeset しています。2022 年に <a href="https://tateditor.app/about">TATEditor</a> から試験的に乗り換えました。</li>
       <ul>
         <li> 執筆 + html 化: VSCode + <a href="https://marketplace.visualstudio.com/items?itemName=TaiyoFujii.novel-writer">novel-writer</a></li>
         <li> バージョン管理: GitHub (private repositories)</li>
         <li> CSS 組版: <a href="https://vivliostyle.org/ja/">vivliostyle CLI</a> + Chromium</li>
         <li> EPUB 化: <s><a href="https://sigil-ebook.com/sigil/">Sigil</a></s> → Ruby REXML</li>
         <li> 表紙作成: <s><a href="https://sscard.monokakitools.net/covermaker.html">かんたん表紙メーカー</a> (サイズが合っていません。すいません)</s> → ImageMagick</li>
         <li> mobi 化: kindlegen</li>
       </ul>
    </ul> 

    <h3>html</h3>
    <ul>
      <li> ブラウザで普通に電子書籍並の縦書き表示ができてうれしいです。</li>
      <li> Firefox では縦中横が表示されません。</li>
      <li> エア草紙（Web 版）で読み込ませると、ブラウザとフォントの組み合わせによっては表記がおかしいです。</li>
      <ul>
        <li> Firefox: 長音記号が表示されない。ダブルミニュートが縦組でない（横組グリフ横転）。</li>
        <li> Chrome for MacOS: ダブルミニュートが縦組でない（横組グリフ横転）。</li>
        <li> Safari for MacOS: 長音記号とダブルミニュートが縦組でない（横書きグリフ横転）。</li>
        <li> Chrome for iOS: 長音記号が縦組でない（横書きグリフ横転）。</li>
        <li> Safari for iOS: 長音記号が縦組でない（横書きグリフ横転）。</li>
      </ul>
    </ul>
    左から順に、Chrome for iOS で表示した html とエア草紙。<br/>
    <a href="images/html.PNG"><img src="images/html.PNG" width="18%"></a>
    <a href="images/airzoshi.PNG"><img src="images/airzoshi.PNG" width="18%"></a>


    <h3>EPUB</h3>
    <ul>
     <li> EPUB は以下の環境で動作確認しています。Google Books、Kindle for iOS/Mac および読書尚友では正しく表示できません。</li>
       <ul>
         <li> ○ Apple Books (iOS, MacOS) </li>
         <li> ○ honto (iOS) </li>
         <li> ○ 楽天 kobo (iOS, Android, MacOS) </li>
         <li> ○ BOOK☆WALKER (iOS、MacOS) </li>
         <li> ○ Kinoppy (iOS, Android, MacOS) </li>
         <li> ✕ Kindle (iOS, MacOS): 横書きになる、ルビが正しく表示されない </li>
         <li> ○ Kindle (Android) </li>
         <li> ○ Bibi (WebUI) </li>
         <li> ○ EPUBReader (Firefox Addon)</li>
         <li> ○ Sigli (MacOS) </li>
         <li> ○ Calibre (MacOS) </li>
         <li> ○ Vivliostyle Viewer (WebUI) </li>
         <li> △ Adobe Digital Editions (MacOS): 横書きになる（EPUB のせいかも） </li>
         <li> △ Thorium (MacOS): 時々表示が崩れる</li>
         <li> ✕ ConTenDo ビューア: ルビ、ダーシなどが正しく表示されない</li>
         <li> △ Google Books (Android): 縦中横が正しく表示されない、ダーシがセンタリングされていない</li>
         <li> ✕ Google Books (WebUI): 2 ページ目以降が表示されない</li>
         <li> △ Perfect Viewer (Android): フォントによっては一部の約物（全角「：」等）が横書きになる（Noto Serif 等）</li>
         <li> ✕ エア草紙 (MacOS): 行頭以外の全角空白が無視されることがある。二重山括弧が強制的にルビになってしまうことがある。ダブルミニュートが縦書きグリフを参照していない（横書きグリフを90度回転しただけ）。</li>
         <li> ✕ 読書尚友 (iOS): 空行、全角空白が無視される</li>
         <li> ✕ 読書尚友 Lite (Android): 空行が無視される。ダーシ、三点リーダ等の表示がおかしい</li>
       </ul>
      <li>個人的には楽天 Kobo での見た目が好きです。</li>
    </ul>

    iOS での表示。左から Apple Books, honto, kobo, BOOK☆WALKER, Kinoppy です。<br />
    <a href="images/ibooks.PNG"><img src="images/ibooks.PNG" width="18%"></a>
    <a href="images/honto.PNG"><img src="images/honto.PNG" width="18%"></a>
    <a href="images/kobo.PNG"><img src="images/kobo.PNG" width="18%"></a>
    <a href="images/bookwalker.PNG"><img src="images/bookwalker.PNG" width="18%"></a>
    <a href="images/kinoppy.PNG"><img src="images/kinoppy.PNG" width="18%"></a>

    <p></p>

    Android (Pixel 4a) での表示。左から kobo, Kinoppy, kindle です。<br />
    <a href="images/kobo_android.png"><img src="images/kobo_android.png" width="18%"></a>
    <a href="images/kinoppy_android.png"><img src="images/kinoppy_android.png" width="18%"></a>
    <a href="images/kindle_android.png"><img src="images/kindle_android.png" width="18%"></a>


    <h3>PDF</h3>
    <ul>
      <li>PDF のサイズは四六判から文庫サイズ (A6) に変更しました。印刷すると少し文字が大きすぎるかもしれません。電子的閲覧向けです。</li>
    </ul>
    <a href="images/pdf.png"><img src="images/pdf.png" width="18%"></a>
  
    <h3>mobi</h3>
    <ul>
      <li>kindlegen で作っています。Kindle の動作環境によって以下のような違いがあります。</li>
      <ul>
        <li> △ Kindle for Mac: Mac のローカル環境に mobi ファイルを置き、ダブルクリックで Kindle で開くと正常に表示されます。”Send to Kindle” を使うと Amazon 側で変換されるらしく、横書きになってしまい、ルビも表示されません。</li>
        <li> ✕ Kindle for iOS: ”Send to Kindle” を使うと Amazon 側で変換されるらしく、横書きになってしまい、ルビも表示されません。</li>
        <li> ○ Kindle for Android: 正常に表示されます。</li>
      </ul>
      <li>かつては iOS 用には、Kindle Previewer などで azk ファイルを作成すれば正しく読めたようなのですが、あいにく最近の Kindle では azk が扱えません。</li>
    </ul>


    <h2>参考文献</h2>
    <ul>
      <li> <a href="https://blog.nnn.dev/entry/2022/07/01/180000">縦書きHTMLにおける文字の向きはどのように定まるか</a>、ドワンゴ教育サービス開発者ブログ </li>
      <li> <a href="https://kadokawa-epub.bookwalker.co.jp/kadokawa-epub-%E5%88%B6%E4%BD%9C%E4%BB%95%E6%A7%98">KADOKAWA-EPUB 制作仕様</a></li>
      <li> <a href="https://blog.antenna.co.jp/CSSPage2/archives/100">UTR50（Unicode縦書きの文字の向き仕様）で注意を要する文字</a>、CSS組版ブログ</li>
      <li> <a href="http://densyodamasii.com/?p=2314">InDesignとEPUBの縦書き時の文字の向きの差について</a>、電書魂　─グーテンベルクの遙か彼方へ─</li>
      <li> 小林　敏：<a href="https://www.jagat.or.jp/past_archives/content/view/3736.html">ダブルミニュート、ダブル引用符 括弧類その2</a>、日本語組版とつきあう</li>
    </ul>

  </body>
</html>
